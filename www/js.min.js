function updateDate(e){var t=new Date;timeDifference(e,t)}function timeDifference(e,t){var a=1e3,r=60*a,s=60*r,i=Math.abs(e-t),n=100/(36e5*_user.Target_Fast)*i,l=parseInt(i/s,10);i-=l*s;var o=parseInt(i/r,10);i-=o*r;var c=("0"+o).slice(-2),g=parseInt(i/a,10),h=parseInt(n),m=$("#svg #bar");if(isNaN(h))h=0;else{var _=m.attr("r"),d=Math.PI*(2*_),u=h;h<0&&(h=0),h>100&&(h=100);var v=(100-h)/100*d;m.css({strokeDashoffset:v}),$("#cont").attr("data-pct",u)}return $("#h").html(l),$("#m").html(c),$("#s").html(g)}function getMonthAndDate(e){var t=new Array;t[0]="Enero",t[1]="Febrero",t[2]="Marzo",t[3]="Abril",t[4]="Mayo",t[5]="Junio",t[6]="Julio",t[7]="Agosto",t[8]="Septiembre",t[9]="Octubre",t[10]="Noviembre",t[11]="Diciembre";var a=new Date(e),r=new Date(a.valueOf()+36e5*parseInt(_user.Target_Fast)),s=t[a.getMonth()],i=t[r.getMonth()];$("#inicio").html(s+" "+a.getDate()+"<br>"+a.toLocaleTimeString()),$("#fin").html(i+" "+r.getDate()+"<br>"+r.toLocaleTimeString())}function drawBarCircleChart(e,t,a,r){function s(e){var t=d3.interpolate({value:0},e);return function(e){return m(t(e))}}var i=1.8*e[0].value,n=200,l=.1,o=35,c=1.45,t=d3.select(t),g=d3.select(a),h=d3.select(r),m=d3.svg.arc().innerRadius(function(e,t){return e.index/c*n+o}).outerRadius(function(e,t){return(e.index/c+l/c)*n+o}).startAngle(Math.PI).endAngle(function(e){return Math.PI+e.value/i*2*Math.PI}),_=t.selectAll("path").data(e);_.enter().append("svg:path").attr("fill",function(e,t){return e.fill}).attr("stroke","#D1D3D4").transition().ease("elastic").duration(1e3).delay(function(e,t){return 100*t}).attrTween("d",s),g.selectAll("tspan").data(e).enter().append("tspan").attr({x:50,y:function(e,t){return 14*t},"text-anchor":"end"}).text(function(t,a){return e[a].value}),h.selectAll("tspan").data(e).enter().append("tspan").attr({x:0,y:function(e,t){return 14*t}}).text(function(t,a){return e[a].label})}function DeviceTypeCheck(){var e="iPad"==navigator.userAgent.match(/iPad/i)?"iPad":"iPhone"==navigator.userAgent.match(/iPhone/i)?"iPhone":"Android"==navigator.userAgent.match(/Android/i)?"Android":"BlackBerry"==navigator.userAgent.match(/BlackBerry/i)?"BlackBerry":"null";"iPhone"==e||"iPad"==e?($("#menu_bar").addClass("Menu_Bar_Iphone"),$("#main_content").addClass("main_content_iphone"),$("#targetTime").addClass("target_time_iphone")):"Android"==e&&($("#menu_bar").addClass("Menu_Bar"),$("#main_content").addClass("main_content"))}function getIMC(e,t){var a;return a=Math.round(e/Math.pow(t/100,2)*10)/10}function SaveData(){var e=new Date(localStorage.getItem("Fast_Start"));potatoe=e.toLocaleString().split(","),console.log(potatoe[0])}var isRunning=!1,fastint,time,_user,reached;$(document).ready(function(){if(_user=JSON.parse(localStorage.getItem("User")),console.log(_user),localStorage.getItem("Fast_Start")){time=new Date(localStorage.getItem("Fast_Start")),$("#inicio").html(" "+time.getDay()+"<br>"+time.toLocaleTimeString());var e=time.getTime();getMonthAndDate(localStorage.getItem("Fast_Start")),fastint=window.setInterval(function(){updateDate(e)},1e3),isRunning=!0,$("#control").text("Detener"),$("#control").addClass("pause_fast")}else $("#control").text("Iniciar"),$("#control").addClass("start_fast"),$("#h").html("0"),$("#m").html("00"),$("#s").html("00");$("#control").click(function(){var e=$(this);if(isRunning){clearInterval(fastint),isRunning=!1;var t=new Date;reached=$("#h").html()>=_user.Target_Fast,_user.User_Fasts.push({Start_Date:time.getTime(),Finish_Date:t.getTime(),total_fast_time:parseInt($("#h").html()),Target_reached:reached}),_user.Fast_Hit=parseInt(_user.Fast_Hit)+1,localStorage.setItem("User",JSON.stringify(_user)),localStorage.removeItem("Fast_Start"),$("#h").html("0"),$("#m").html("00"),$("#s").html("00"),$("#cont").attr("data-pct",0),$("#control").removeClass("pause_fast"),$("#control").addClass("start_fast"),e.text("Iniciar")}else{isRunning=!0,$("#control").removeClass("start_fast"),$("#control").addClass("pause_fast"),e.text("Detener");var a=new Date,r=a.getTime();ms=Math.abs(r-a),a.setTime(r),getMonthAndDate(a),time=a,localStorage.setItem("Fast_Start",a),fastint=window.setInterval(function(){updateDate(a)},1e3)}})});var chartData={barCircleWeb:[{index:.1,value:18,fill:"#BBDDF5",label:"L"},{index:.2,value:13,fill:"#A5D1F1",label:"M"},{index:.3,value:16,fill:"#8EC6EE",label:"M"},{index:.4,value:24,fill:"#78BBEB",label:"J"},{index:.5,value:19,fill:"#61B0E8",label:"V"},{index:.6,value:19,fill:"#4BA4E4",label:"S"},{index:.7,value:18,fill:"#3499E1",label:"D"}]};setTimeout(function(){drawBarCircleChart(chartData.barCircleWeb,"#circleBar-web-chart","#circleBar-web-values","#circleBar-web-labels")},500),d3.select("#circleBar-web-icon").transition().delay(500).duration(500).attr("opacity","1"),d3.select("#circleBar-web-text").transition().delay(750).duration(500).attr("opacity","1"),d3.select("#circleBar-web-clipLabels").transition().delay(600).duration(1250).attr("height","150");var _user,month=new Array;$(document).ready(function(){if(month[0]="Enero",month[1]="Febrero",month[2]="Marzo",month[3]="Abril",month[4]="Mayo",month[5]="Junio",month[6]="Julio",month[7]="Agosto",month[8]="Septiembre",month[9]="Octubre",month[10]="Noviembre",month[11]="Diciembre",_user=JSON.parse(localStorage.getItem("User")),console.log(_user),_user)for(var e=0;e<_user.User_Fasts.length;e++){var t=new Date(_user.User_Fasts[e].Start_Date),a=new Date(_user.User_Fasts[e].Finish_Date),r=month[t.getMonth()],s=month[a.getMonth()];_user.Target_reached?$("#Fast_History").append('<div class="row" style="margin-bottom: 0 !important"><div class="col s12 m5"><div class="card-panel blueish-white border_green"><div class="row center-align" style="margin-bottom: 0 !important"><div class="col s4">Inicio: <br>'+r+" "+t.getDate()+"<br>"+t.toLocaleTimeString()+'</div><div class="col s4">Fin: <br>'+s+" "+a.getDate()+"<br>"+a.toLocaleTimeString()+'</div><div class="col s4"><br>Total: '+_user.User_Fasts[e].total_fast_time+"</div></div></div></div></div>"):$("#Fast_History").append('<div class="row" style="margin-bottom: 0 !important"><div class="col s12 m5"><div class="card-panel blueish-white border_red"><div class="row center-align" style="margin-bottom: 0 !important"><div class="col s4">Inicio: <br>'+r+" "+t.getDate()+"<br>"+t.toLocaleTimeString()+'</div><div class="col s4">Fin: <br>'+s+" "+a.getDate()+"<br>"+a.toLocaleTimeString()+'</div><div class="col s4"><br>Total: '+_user.User_Fasts[e].total_fast_time+"</div></div></div></div></div>")}else alert("Por favor dirijase a la seccion de perfil para darse de alta")}),$(document).ready(function(){DeviceTypeCheck(),$(".button-collapse").sideNav(),$(".collapsible").collapsible(),$("input#input_text, textarea#textarea1").characterCounter(),$("select").material_select();var e=JSON.parse(localStorage.getItem("User"));e&&($("#User_Name").html(e.User_Name),$(".name").html(e.User_Name),$("#weight").html(e.User_Weigth),$("#height").html(e.User_height),$("#imc").html(e.IMC),$("#hit").html(e.Fast_Hit),$("#User_gender").val(e.User_gender))}),$(document).ready(function(){var e=JSON.parse(localStorage.getItem("User"));console.log(e),e?($("#User_Name").val(e.User_Name),$(".name").html(e.User_Name),$("#User_Age").val(e.User_Age),$("#User_gender").val(e.User_gender),$("#User_Weigth").val(e.User_Weigth),$("#User_height").val(e.User_height),$("#weight").html(e.User_Weigth),$("#height").html(e.User_height),$("#imc").html(e.IMC),$("#hit").html(e.Fast_Hit),$("#Target_Fast").val(e.Target_Fast),$("#Language").val(e.Language)):$("#update").click(function(){var t={User_Name:$("#User_Name").val(),User_Age:$("#User_Age").val(),User_gender:$("#User_gender").val(),User_Weigth:$("#User_Weigth").val(),User_height:$("#User_height").val(),User_Fasts:[],Total_Fast_Time:0,Fast_Hit:0,Target_Fast:null,IMC:getIMC($("#User_Weigth").val(),$("#User_height").val()),Language:null,User_Image:null};$("#imc").html(getIMC($("#User_Weigth").val(),$("#User_height").val())),$("#weight").html($("#User_Weigth").val()),$("#height").html($("#User_height").val()),$("#hit").append(0),localStorage.setItem("User",JSON.stringify(t)),e=t}),$("#update").click(function(){$("#User_Name").val()&&(e.User_Name=$("#User_Name").val()),$("#User_Age").val()&&(e.User_Age=$("#User_Age").val()),$("#User_gender").val()&&(e.User_gender=$("#User_gender").val()),$("#User_Weigth").val()&&(e.User_Weigth=$("#User_Weigth").val()),$("#User_height").val()&&(e.User_height=$("#User_height").val()),e.IMC=getIMC($("#User_Weigth").val(),$("#User_height").val()),$("#imc").html(getIMC($("#User_Weigth").val(),$("#User_height").val())),$("#weight").html($("#User_Weigth").val()),$("#height").html($("#User_height").val()),$(".name").html($("#User_Name").val()),localStorage.setItem("User",JSON.stringify(e))}),$("#save").click(function(){$("#Target_Fast").val()&&(e.Target_Fast=$("#Target_Fast").val()),$("#Language").val()&&(e.Language=$("#Language").val()),localStorage.setItem("User",JSON.stringify(e)),console.log(e)}),$("#AddFast").click(function(){var e=new Date,t=new Date(e.getTime()+36e5),a=JSON.parse(localStorage.getItem("Users_DB")),r=$("#selectedUser").val();a.Users[r-1].User_Fasts.push({Start_Date:e.getTime(),Finish_Date:t.getTime(),total_fast_time:t.getTime(),Target_reached:reached}),console.log(a),localStorage.setItem("Users_DB",JSON.stringify(a))})});